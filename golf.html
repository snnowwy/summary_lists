<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golf Summaries</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 p-4">
  <div class="max-w-4xl mx-auto">
    <select id="categorySelect" class="w-full p-3 rounded border border-gray-300 mb-6 text-lg font-semibold"></select>
    <div id="listsContainer" class="space-y-6"></div>
  </div>

  <script>
    const data = [
      {
        category: "Chipping",
        lists: [
          {
            title: "Bump and run - Golf sidekick",
            url: "https://youtu.be/g9QRqZAGNxs",
            bullets: [
              { text: "Hands high and stood up, hitting off the toe." },
              { text: "Putting stroke. Hit easy and consistent. Change club not swing." },
              { text: "Keep it low" },
              { text: "Experiment with ball position in stance for fine grained distance control" },
            ]
          },
          {
            title: "Toe Down Chipping with 6-8-10 irons - Rule of 12 SIMPLIFIED",
            subtitle: "Golf sidekick",
            url: "https://youtu.be/ZGe-WSTYlAA",
            bullets: [
              { text: "6, 8 & 10 (PW) irons" },
              { text: "Putter swing, toe down chip" },
              { text: "PW: 50% carry 50% roll" },
              { text: "8 iron: ⅓ carry ⅔ roll" },
              { text: "6 iron: ¼ carry ¾ roll" },
              { text: "Uphill surface, 8 iron becomes 6, downhill, PW. Still calculate using 8 iron ratio: 50-50" },
            ]
          }
        ]
      },
      {
        category: "Second Category",
        lists: [
          {
            title: "List title A",
            url: "https://www.youtube.com/watch?v=zxcvbnmlkjh",
            bullets: [
              { text: "Helpful link", url: "https://some.site", url_text: "Visit" }
            ]
          }
        ]
      }
    ];

    const categorySelect = document.getElementById("categorySelect");
    const listsContainer = document.getElementById("listsContainer");

    function getYouTubeThumbnail(url) {
      const videoId = url.split("v=")[1]?.split("&")[0];
      return videoId ? `https://img.youtube.com/vi/${videoId}/0.jpg` : "";
    }

    function renderCategories() {
      data.forEach((entry, index) => {
        const option = document.createElement("option");
        option.value = index;
        option.textContent = entry.category;
        categorySelect.appendChild(option);
      });
    }

    function renderLists(categoryIndex) {
      const { lists } = data[categoryIndex];
      listsContainer.innerHTML = "";

      lists.forEach((list, idx) => {
        const listDiv = document.createElement("div");
        listDiv.className = "bg-white shadow rounded-lg p-4";

        const title = document.createElement("h2");
        title.className = "text-xl font-semibold cursor-pointer text-blue-700 hover:underline";
        title.textContent = list.title;
        title.dataset.idx = idx;

        const bulletsDiv = document.createElement("div");
        bulletsDiv.className = "mt-4 hidden space-y-3";

        list.bullets.forEach(b => {
          const bullet = document.createElement("div");
          bullet.className = "text-gray-800 pl-4 relative";

          const dot = document.createElement("span");
          dot.className = "absolute left-0 top-1.5 w-2 h-2 bg-blue-500 rounded-full";
          bullet.appendChild(dot);

          const content = document.createElement("span");
          content.className = "ml-4";

          if (b.url) {
            content.innerHTML = `${b.text} (<a href="${b.url}" target="_blank" class="text-blue-600 underline">${b.url_text || 'link'}</a>)`;
          } else {
            content.textContent = b.text;
          }

          bullet.appendChild(content);
          bulletsDiv.appendChild(bullet);
        });

        // YouTube thumbnail
        const ytThumbUrl = getYouTubeThumbnail(list.url);
        if (ytThumbUrl) {
          const thumbLink = document.createElement("a");
          thumbLink.href = list.url;
          thumbLink.target = "_blank";
          thumbLink.className = "block mt-4";

          const img = document.createElement("img");
          img.src = ytThumbUrl;
          img.alt = "YouTube thumbnail";
          img.className = "rounded shadow w-full max-w-md";

          thumbLink.appendChild(img);
          bulletsDiv.appendChild(thumbLink);
        }

        title.addEventListener("click", () => {
          bulletsDiv.classList.toggle("hidden");
        });

        listDiv.appendChild(title);
        listDiv.appendChild(bulletsDiv);
        listsContainer.appendChild(listDiv);
      });
    }

    categorySelect.addEventListener("change", e => {
      renderLists(e.target.value);
    });

    renderCategories();
    renderLists(0);
  </script>
</body>

</html>